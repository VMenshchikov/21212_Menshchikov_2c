/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn more about Gradle by exploring our samples at https://docs.gradle.org/7.4.2/samples
 * This project uses @Incubating APIs which are subject to change.
*/

plugins {
    id 'java'
    id 'application'
}

application {
    mainClass = 'Main'
    //mainMethodName = 'main'
}

java {
    sourceCompatibility = JavaVersion.VERSION_17
    targetCompatibility = JavaVersion.VERSION_17
}

repositories {
    mavenCentral()
}


dependencies {

    implementation files('build/libs/lab1.jar')
    implementation 'javax.annotation:javax.annotation-api:1.3.2'
    
    implementation fileTree(dir: '.', include: ['**/*.java'])

    //testImplementation()
    //testImplementation 'org.junit.jupiter:junit-jupiter-api:5.8.1'
    //testRuntimeOnly 'org.junit.jupiter:junit-jupiter-engine:5.8.1'
}

sourceSets {
    main {
        java {
            srcDirs =  ['./']
            exclude 'src/Test.java'
        }
        resources {
          srcDirs = ['resources']
        }
        output.dir('build/classes')
    }

    test {
        java {
            srcDirs =  ['src']
        }
        resources {
            srcDirs = ['src/resources/']
        }
    }
}

jar {
    archiveName = 'lab1.jar'
    manifest {
        attributes(
                'Main-Class': 'Main'
        )
    }
} 

test {
    useJUnitPlatform()
}

task HelloWorld(type: JavaExec) {
    main = 'Main'
    classpath = sourceSets.main.runtimeClasspath
    args = ['21', '4', './build/resources/main/programms/HelloWorld.txt',
             './build/resources/main/config.properties']
}

task HelloWorld2(type: JavaExec) {
    main = 'Main'
    classpath = sourceSets.main.runtimeClasspath
    args = ['30', '2', './build/resources/main/programms/HelloWorld2.txt',
             './build/resources/main/config.properties']
}

task Fib(type: JavaExec) {
    main = 'Main'
    classpath = sourceSets.main.runtimeClasspath
    args = ['100', '5', './build/resources/main/programms/Fib.txt',
             './build/resources/main/config.properties']
}

task Fact(type: JavaExec) {
    main = 'Main'
    classpath = sourceSets.main.runtimeClasspath
    args = ['80', '5', './build/resources/main/programms/Fact.txt',
             './build/resources/main/config.properties']
}

task Bottles(type: JavaExec) {
    main = 'Main'
    classpath = sourceSets.main.runtimeClasspath
    args = ['100', '10', './build/resources/main/programms/99bottles.txt',
             './build/resources/main/config.properties']
}

task clear(type : Delete) {
    delete 'build'
}
